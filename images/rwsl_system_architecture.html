<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RWSL 통합 시스템 구성도</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            width: 900px;
            height: 560px;
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background: white;
            box-sizing: border-box;
        }
        .chart-title {
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .system-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 15px;
            height: 480px;
            width: 100%;
        }
        .component {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 11px;
            padding: 10px;
            position: relative;
        }
        .control-center {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            grid-column: 2;
            grid-row: 1;
        }
        .rel-system {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            grid-column: 1;
            grid-row: 2;
        }
        .thl-system {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            grid-column: 2;
            grid-row: 2;
        }
        .ril-system {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            grid-column: 3;
            grid-row: 2;
        }
        .sensors {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            grid-column: 1;
            grid-row: 3;
        }
        .communication {
            background: linear-gradient(135deg, #3498db, #2980b9);
            grid-column: 2;
            grid-row: 3;
        }
        .power-system {
            background: linear-gradient(135deg, #1abc9c, #16a085);
            grid-column: 3;
            grid-row: 3;
        }
        .monitoring {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            grid-column: 1 / 4;
            grid-row: 4;
        }
        .connection-line {
            position: absolute;
            background: #34495e;
            z-index: -1;
        }
        .vertical-line {
            width: 2px;
            height: 40px;
            left: 50%;
            top: -20px;
        }
        .horizontal-line {
            height: 2px;
            width: 100%;
            top: 50%;
            left: 0;
        }
    </style>

    <!-- html2canvas 라이브러리 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- 자동 이미지 추출 스크립트 -->
    <script>
        window.addEventListener('load', function() {
            // 페이지 로드 후 1초 대기 (차트 렌더링 완료 대기)
            setTimeout(function() {
                // 전체 body를 캡처
                html2canvas(document.body, {
                    useCORS: true,
                    allowTaint: true,
                    scale: 1,
                    backgroundColor: '#ffffff',
                    width: 900,
                    height: 560
                }).then(function(canvas) {
                    // 이미지로 변환
                    const imgData = canvas.toDataURL('image/png');
                    
                    // 다운로드 링크 생성
                    const fileName = window.location.pathname.split('/').pop().replace('.html', '.png');
                    const downloadLink = document.createElement('a');
                    downloadLink.href = imgData;
                    downloadLink.download = fileName;
                    downloadLink.textContent = '이미지 다운로드';
                    downloadLink.style.cssText = 'position: fixed; top: 10px; right: 10px; z-index: 9999; background: #007bff; color: white; padding: 10px; border-radius: 5px; text-decoration: none; font-family: Arial;';
                    
                    document.body.appendChild(downloadLink);
                    
                    // 자동으로 다운로드 시작 (옵션)
                    // downloadLink.click();
                    
                    console.log('이미지 추출 완료. 다운로드 버튼이 우상단에 생성되었습니다.');
                }).catch(function(error) {
                    console.error('이미지 추출 실패:', error);
                });
            }, 1000);
        });
    </script>

</head>
<body>
    <div class="chart-title">RWSL 통합 시스템 구성도</div>
        <div class="system-diagram">
            <div class="component control-center">
                <div class="connection-line vertical-line"></div>
                중앙제어시스템<br>
                (Control Center)<br>
                <small>AI 기반 자동제어</small>
            </div>
            
            <div class="component rel-system">
                활주로 진입등<br>
                (REL)<br>
                <small>적색 경고등</small>
            </div>
            
            <div class="component thl-system">
                유도로 대기등<br>
                (THL)<br>
                <small>진입 차단등</small>
            </div>
            
            <div class="component ril-system">
                활주로 교차등<br>
                (RIL)<br>
                <small>교차 충돌 방지</small>
            </div>
            
            <div class="component sensors">
                센서 네트워크<br>
                (Sensors)<br>
                <small>레이더/광학 융합</small>
            </div>
            
            <div class="component communication">
                통신 시스템<br>
                (5G Network)<br>
                <small>실시간 데이터 전송</small>
            </div>
            
            <div class="component power-system">
                전원 공급 장치<br>
                (UPS System)<br>
                <small>무정전 전원</small>
            </div>
            
            <div class="component monitoring">
                관제탑 모니터링 시스템 (ATC Monitoring)<br>
                <small>실시간 상황 감시 및 수동 제어 기능</small>
            </div>
        </div>

    <script>
        // Add connection animations
        document.addEventListener('DOMContentLoaded', function() {
            const components = document.querySelectorAll('.component');
            components.forEach((component, index) => {
                setTimeout(() => {
                    component.style.opacity = '0';
                    component.style.transform = 'scale(0.8)';
                    component.style.transition = 'all 0.5s ease-in-out';
                    
                    setTimeout(() => {
                        component.style.opacity = '1';
                        component.style.transform = 'scale(1)';
                    }, 100);
                }, index * 200);
            });
        });
    </script>
</body>
</html>